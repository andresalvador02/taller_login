<!-- pago.html -->
<form method="post" action="{{ url_for('pago') }}" onsubmit="return validarFormulario()">
    <label for="nombre">Nombre del titular</label>
    <input type="text" name="nombre" id="nombre" required>

    <label for="email">Correo electrónico</label>
    <input type="email" name="email" id="email" placeholder="correo@ejemplo.com" required>

    <label for="tarjeta">Número de tarjeta</label>
    <input type="text" name="tarjeta" id="tarjeta" maxlength="16" required>

    <label for="expiracion">Fecha de expiración (MM/AA)</label>
    <input type="text" name="expiracion" id="expiracion" placeholder="MM/AA" required>

    <label for="cvv">CVV</label>
    <input type="password" name="cvv" id="cvv" maxlength="4" required>

    <div class="botones">
        <a href="{{ url_for('carrito') }}" class="cancelar">⬅️ Cancelar</a>
        <button type="submit" class="confirmar">✅ Confirmar Pago</button>
    </div>
</form>

<script>
    function validarFormulario() {
        const nombre = document.getElementById("nombre").value.trim();
        const correo = document.getElementById("email").value.trim();
        const tarjeta = document.getElementById("tarjeta").value.trim();
        const expiracion = document.getElementById("expiracion").value.trim();
        const cvv = document.getElementById("cvv").value.trim();

        if (!/^\S+@\S+\.\S+$/.test(correo)) {
            alert("Correo inválido.");
            return false;
        }

        if (!/^\d{16}$/.test(tarjeta)) {
            alert("El número de tarjeta debe tener 16 dígitos.");
            return false;
        }

        if (!/^\d{2}\/\d{2}$/.test(expiracion)) {
            alert("Formato inválido para expiración.");
            return false;
        }

        if (!/^\d{3,4}$/.test(cvv)) {
            alert("CVV inválido.");
            return false;
        }

        if (nombre === "") {
            alert("Nombre es obligatorio.");
            return false;
        }

        return true;
    }
</script>

